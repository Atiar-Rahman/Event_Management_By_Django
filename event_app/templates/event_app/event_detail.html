{% extends "event_app/base.html" %}
{% block title %}{{ event.name }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white p-6 rounded shadow">
  <div class="flex gap-6">
    <img src="{{ event.image.url }}" alt="{{ event.name }}" class="w-48 h-48 object-cover rounded border">
    <div class="flex-1">
      <h1 class="text-2xl font-bold mb-2">{{ event.name }}</h1>
      <div class="text-gray-600 mb-2">
        {{ event.category.name }} â€¢ {{ event.location }}
      </div>
      <div class="text-sm text-gray-500 mb-4">
        <span class="inline-block mr-4">Date: {{ event.date }}</span>
        {% if event.time %}
          <span class="inline-block">Time: {{ event.time }}</span>
        {% endif %}
      </div>
      <p class="mb-4">{{ event.description }}</p>

      <div class="mt-4">
        <span class="text-sm text-gray-500">Participants:</span>
        <span class="font-semibold">{{ event.participants.count }}</span>
      </div>

      <div class="mt-6">
        {% if request.user.is_authenticated %}
          {% if request.user in event.participants.all %}
            <form method="post" action="{% url 'event_app:cancel_rsvp' event.id %}">
              {% csrf_token %}
              <button class="px-4 py-2 rounded bg-rose-600 text-white hover:bg-rose-700">
                Cancel RSVP
              </button>
            </form>
          {% else %}
            <form method="post" action="{% url 'event_app:rsvp' event.id %}">
              {% csrf_token %}
              <button class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">
                RSVP to this Event
              </button>
            </form>
          {% endif %}
        {% else %}
          <a href="{% url 'login' %}?next={{ request.path }}" class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">
            Log in to RSVP
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
